<!DOCTYPE html>
<html>
  <head>
    <title>Senior Thesis Demo</title>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugin-preload.js"></script>
    <script src="jspsych/plugin-html-keyboard-response.js"></script>
    <script src="jspsych/plugin-audio-button-response.js"></script>
    <link href="jspsych/jspsych.css" rel="stylesheet" type="text/css" />
  </head>
  <body></body>
  <script>
    const jsPsych = initJsPsych();

    var preload = {
      type: jsPsychPreload,
      auto_preload: true 
    };

    var welcome = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: "Welcome to the experiment. Press the space bar to begin.",
      choices: " "
      };

    var audioFiles = ['EQ_-36dB.wav', 'EQ_-18dB.wav', 'EQ_-6dB.wav', 'EQ_0dB.wav',
                      'unmasked_-36dB.wav', 'unmasked_-18dB.wav', 'unmasked_-6dB.wav', 'unmasked_0dB.wav'];

    jsPsych.randomization.shuffle(audioFiles);

    var trial = {
        type: jsPsychAudioButtonResponse,
        stimulus: 'audio/' + audioFiles[i],
        prompt: '<p>Choose one of the buttons after the audio finishes playing.</p>',
        choices: ['One instrument', 'Two instruments'],
      };

    var trials = [];

    for (var i = 0; i < audioFiles.length; i++) {
      var trial = {
        type: jsPsychAudioButtonResponse,
        stimulus: 'audio/' + audioFiles[i],
        prompt: '<p>Choose one of the buttons after the audio finishes playing.</p>',
        choices: ['One instrument', 'Two instruments'],
      };

      trials.push(trial);
    }

    var timeline = [welcome].concat(trials);

    var end = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: "Thanks for your participation!",
      choices: " "
      };

    timeline.push(end)

    jsPsych.run(timeline);
  </script>
</html>
